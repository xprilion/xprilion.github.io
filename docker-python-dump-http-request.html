<!DOCTYPE html><html lang="en" class="__variable_6ab973"><head><meta charSet="utf-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/22966f4f11fece13-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/3df4cf0b22f61940-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/a481f011d1f4a14b-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/feff4f1fc62fae3c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/5d465971106e06ba.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/2dba37557e579c7e.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f3b8208e8dab82f4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-51e91e9f6e824314.js"/><script src="/_next/static/chunks/a82cbd8b-b3a1b1aa1798277d.js" async=""></script><script src="/_next/static/chunks/261-9869fd9e23c1aca9.js" async=""></script><script src="/_next/static/chunks/main-app-23cc923f66c03781.js" async=""></script><script src="/_next/static/chunks/app/layout-03b28790fff4d2e4.js" async=""></script><script src="/_next/static/chunks/943-eb5c9570e2ea5452.js" async=""></script><script src="/_next/static/chunks/981-982ff48b33ef9837.js" async=""></script><script src="/_next/static/chunks/224-ed8f8dcad199b1cb.js" async=""></script><script src="/_next/static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-NKJL65V2YL" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js" as="script"/><meta name="next-size-adjust" content=""/><link rel="icon" type="image/png" href="/apple-icon.png" sizes="96x96"/><link rel="icon" type="image/svg+xml" href="/icon0.svg"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><meta name="apple-mobile-web-app-title" content="xprilion&#x27;s blog"/><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#7b46f6"/><meta property="og:title" content="xprilion&#x27;s blog"/><meta property="og:description" content="Hey, I&#x27;m Anubhav Singh. I love building software, mixing stacks and making memes."/><meta property="og:image" content="/favicon.png"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@xprilion"/><meta name="twitter:creator" content="@xprilion"/><meta name="twitter:title" content="xprilion&#x27;s blog"/><meta name="twitter:description" content="Hey, I&#x27;m Anubhav Singh. I love building software, mixing stacks and making memes."/><meta name="twitter:image" content="/favicon.png"/><meta itemProp="name" content="xprilion&#x27;s blog"/><meta itemProp="description" content="Hey, I&#x27;m Anubhav Singh. I love building software, mixing stacks and making memes."/><meta itemProp="image" content="/favicon.png"/><title>Docker Python Dump HTTP Request Example</title><meta name="description" content="This blog is an explanation for the code present in the github.com/xprilion/docker-python-dump-http-request-example repo.

The main purpose of the repo is to create a simple HTTP server developed using Python&#x27;s Flask framework, hosted in a Docker environment. The server is designed to log HTTP request and response data for debugging or informational purposes. The HTTP server receives requests, stores information about them, and then responds with a JSON representation of the request data.


Code"/><link rel="icon" href="/logo.jpg"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><script>((e,t,r,n,o,a,i,u)=>{let l=document.documentElement,s=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(l.classList.remove(...n),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)}),r=t,u&&s.includes(r)&&(l.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="max-w-6xl mx-auto px-1 md:px-4 font-gentium"><div class="flex flex-col min-h-screen px-2 md:px-4 bg-background text-foreground"><nav class="flex flex-row justify-between items-center py-4 border-b border-border relative"><a class="flex items-center justify-center" href="/"><h1 class="text-xl sm:text-2xl m-0 text-foreground font-normal leading-normal inline-block font-gentium-book truncate max-w-[200px] sm:max-w-none">xprilion&#x27;s blog</h1></a><div class="flex items-center gap-4"><div class="hidden lg:flex items-center font-gentium text-lg"><div><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/posts">Posts<!-- --> </a></div><div><span class="my-1 text-foreground"> · </span><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/talks">Talks<!-- --> </a></div><div><span class="my-1 text-foreground"> · </span><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/publications">Publications<!-- --> </a></div><div><span class="my-1 text-foreground"> · </span><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/codelabs">Codelabs<!-- --> </a></div></div><button id="mobile-menu-button" type="button" class="flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 lg:hidden text-3xl rounded-full border-2 border-foreground dark:invert dark:border-background" style="background-image:url(/ellipses.png);background-size:50%;background-position:50%;background-repeat:no-repeat" aria-label="Toggle navigation menu" aria-expanded="false"></button></div></nav><main class="flex-grow max-w-3xl mx-auto w-full py-8 px-1 md:px-4"><div class="mb-6"><a class="text-blue-600 hover:underline mb-4 block" href="/posts">← Back to all posts</a><h1 class="text-2xl md:text-3xl font-bold mb-2">Docker Python Dump HTTP Request Example</h1><p class="text-gray-600 dark:text-gray-200 text-sm ">12 May, 2023</p></div><div class="prose prose-blue max-w-none"></div><script>(self.__next_s=self.__next_s||[]).push([0,{"children":"\n          MathJax = {\n            tex: {\n              inlineMath: [['((', '))']],\n              displayMath: [['[[', ']]']],\n            },\n            svg: {\n              fontCache: 'global'\n            }\n          };\n        ","id":"MathJax-config"}])</script></main><div class="w-full mx-auto py-6 max-w-6xl px-4 border-t border-border"><div class="flex flex-col sm:flex-row justify-between gap-2"><div class="text-center sm:text-left text-foreground">© Anubhav Singh <!-- -->2025</div><div class="text-center sm:text-right"><a class="text-foreground hover:text-blue-600 dark:hover:text-primary" href="/sitemap.xml">Sitemap</a><span class="mx-1 text-foreground">·</span><a class="text-foreground hover:text-blue-600 dark:hover:text-primary" href="/newsletter">Newsletter</a></div></div></div></div></div><!--$--><!--/$--><!--$--><!--/$--><script src="/_next/static/chunks/webpack-51e91e9f6e824314.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[6575,[\"177\",\"static/chunks/app/layout-03b28790fff4d2e4.js\"],\"ThemeProvider\"]\n3:I[4922,[],\"\"]\n4:I[3720,[],\"\"]\n5:I[3369,[\"177\",\"static/chunks/app/layout-03b28790fff4d2e4.js\"],\"GoogleAnalytics\"]\n7:I[2466,[],\"MetadataBoundary\"]\n9:I[2466,[],\"OutletBoundary\"]\nc:I[6114,[],\"AsyncMetadataOutlet\"]\ne:I[2466,[],\"ViewportBoundary\"]\n10:I[4797,[],\"\"]\n:HL[\"/_next/static/media/22966f4f11fece13-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/3df4cf0b22f61940-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/a481f011d1f4a14b-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/feff4f1fc62fae3c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/5d465971106e06ba.css\",\"style\"]\n:HL[\"/_next/static/css/2dba37557e579c7e.css\",\"style\"]\n:HL[\"/_next/static/css/f3b8208e8dab82f4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"PpXRoWOsSPkMwOEKGS4UP\",\"p\":\"\",\"c\":[\"\",\"docker-python-dump-http-request\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(blog)\",{\"children\":[[\"slug\",\"docker-python-dump-http-request\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5d465971106e06ba.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2dba37557e579c7e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_6ab973\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"href\":\"/apple-icon.png\",\"sizes\":\"96x96\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/svg+xml\",\"href\":\"/icon0.svg\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/apple-touch-icon.png\"}],[\"$\",\"meta\",null,{\"name\":\"apple-mobile-web-app-title\",\"content\":\"xprilion's blog\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/manifest.json\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#7b46f6\"}],[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",null,{\"itemProp\":\"name\",\"content\":\"xprilion's blog\"}],[\"$\",\"meta\",null,{\"itemProp\":\"description\",\"content\":\"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes.\"}],[\"$\",\"meta\",null,{\"itemProp\":\"image\",\"content\":\"/favicon.png\"}],[\"$\",\"meta\",null,{\"property\":\"og:title\",\"content\":\"xprilion's blog\"}],[\"$\",\"meta\",null,{\"property\":\"og:description\",\"content\":\"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes.\"}],[\"$\",\"meta\",null,{\"property\":\"og:image\",\"content\":\"/favicon.png\"}],[\"$\",\"meta\",null,{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:site\",\"content\":\"@xprilion\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:creator\",\"content\":\"@xprilion\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:title\",\"content\":\"xprilion's blog\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:description\",\"content\":\"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes.\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:image\",\"content\":\"/favicon.png\"}]]}],[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}],[\"$\",\"$L5\",null,{\"gaId\":\"G-NKJL65V2YL\"}]]}]]}],{\"children\":[\"(blog)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:style\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:1:props:style\",\"children\":404}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:style\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style\",\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"docker-python-dump-http-request\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f3b8208e8dab82f4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L9\",null,{\"children\":[\"$La\",\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"nvu1iJgGq1X2FKJMiefQJ\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[6114,[],\"AsyncMetadata\"]\n8:[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:null\n"])</script><script>self.__next_f.push([1,"14:I[1701,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"default\"]\n15:I[1999,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"\"]\n16:I[1106,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"default\"]\n18:I[4046,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"\"]\n17:T2cb0,"])</script><script>self.__next_f.push([1,"\u003cp\u003eThis blog is an explanation for the code present in the \u003ca href=\"http://github.com/xprilion/docker-python-dump-http-request-example\"\u003egithub.com/xprilion/docker-python-dump-http-request-example\u003c/a\u003e repo.\u003c/p\u003e\u003cp\u003eThe main purpose of the repo is to create a simple HTTP server developed using Python's Flask framework, hosted in a Docker environment. The server is designed to log HTTP request and response data for debugging or informational purposes. The HTTP server receives requests, stores information about them, and then responds with a JSON representation of the request data.\u003c/p\u003e\u003ch2 id=\"code-explanation\"\u003eCode Explanation\u003c/h2\u003e\u003cp\u003eThe repo contains the following files:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-plaintext\"\u003eroot/\n├── .dockerignore\n├── Dockerfile\n├── main.py\n└── requirements.txt\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLet's go over these files in sequence of how they appear in the tree structure.\u003c/p\u003e\u003ch3 id=\"dockerignore\"\u003e\u003ca href=\"https://github.com/xprilion/docker-python-dump-http-request-example/blob/main/.dockerignore\"\u003e.dockerignore\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eThe \u003ccode\u003e.dockerignore\u003c/code\u003e file specifies a pattern for each file or directory that should be ignored when building a Docker image using a Dockerfile. Here's what some lines in our \u003ccode\u003e.dockerignore\u003c/code\u003e file means:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003ccode\u003eDockerfile\u003c/code\u003e: This line tells Docker to ignore the \u003ccode\u003eDockerfile\u003c/code\u003e itself when building the Docker image. Although it might seem strange, this is a common practice. The \u003ccode\u003eDockerfile\u003c/code\u003e is used to build the Docker image and is not usually required within the container itself.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e*.pyc, *.pyo, *.pyd\u003c/code\u003e: These lines tell Docker to ignore Python compiled files. When Python programs run, they often create compiled versions of the Python source code. These files are not needed to run the Python program, as Python can run the source code directly.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e__pycache__\u003c/code\u003e: This line tells Docker to ignore the \u003cstrong\u003epycache\u003c/strong\u003e directory. When Python 3.2 and later versions run, they store compiled files in this directory. These files are not needed to run the Python program.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e.pytest_cache\u003c/code\u003e: This line tells Docker to ignore the .pytest_cache directory. This directory is created when running tests with pytest, a testing framework for Python. It is not needed to run the Python application, and including it in the Docker image would increase the size of the image without providing any benefits.\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"dockerfile\"\u003e\u003ca href=\"https://github.com/xprilion/docker-python-dump-http-request-example/blob/main/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eThis Dockerfile outlines the steps to create a Docker image for a Python application:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003ccode\u003eFROM python:3.11-slim\u003c/code\u003e: The base image is the official lightweight Python 3.11 image from Docker Hub.\u003c/li\u003e\u003cli\u003e\u003ccode\u003eENV PYTHONUNBUFFERED True\u003c/code\u003e: Sets the environment variable \u003ccode\u003ePYTHONUNBUFFERED\u003c/code\u003e to \u003ccode\u003eTrue\u003c/code\u003e to allow log messages to be immediately displayed.\u003c/li\u003e\u003cli\u003e\u003ccode\u003eENV APP_HOME /app\u003c/code\u003e and \u003ccode\u003eWORKDIR $APP_HOME\u003c/code\u003e: Sets \u003ccode\u003e/app\u003c/code\u003e as the working directory.\u003c/li\u003e\u003cli\u003e\u003ccode\u003eCOPY . ./\u003c/code\u003e: Copies the local code into the Docker image.\u003c/li\u003e\u003cli\u003e\u003ccode\u003eRUN pip install --no-cache-dir -r requirements.txt\u003c/code\u003e: Installs the Python dependencies from \u003ccode\u003erequirements.txt\u003c/code\u003e file without storing the cache, for a smaller image.\u003c/li\u003e\u003cli\u003e\u003ccode\u003eCMD exec gunicorn --bind :$PORT --workers 1 --threads 8 --timeout 0 main:app\u003c/code\u003e: Specifies the command to run when the Docker container is started. The application is served using the Gunicorn HTTP server, binding to the environment variable \u003ccode\u003e$PORT\u003c/code\u003e, with one worker process and eight threads. The timeout is set to 0 to disable worker timeouts, leaving scaling management to the hosting platform (e.g., Google Cloud Run). The application instance is accessed via \u003ccode\u003emain:app\u003c/code\u003e, where \u003ccode\u003emain\u003c/code\u003e is the Python module (file) and \u003ccode\u003eapp\u003c/code\u003e is the Flask application instance.\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"mainpy\"\u003e\u003ca href=\"http://main.py\"\u003emain.py\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eThe \u003ca href=\"http://main.py\"\u003e\u003ccode\u003emain.py\u003c/code\u003e\u003c/a\u003e script is a Flask application that logs HTTP request and response data. Here's what it does:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003cstrong\u003eInitialization\u003c/strong\u003e: A new Flask application is created and debugging is enabled.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eRequest Saving\u003c/strong\u003e: The \u003ccode\u003esave_request\u003c/code\u003e function collects details from the incoming HTTP request, including endpoint, method, cookies, data, headers, arguments, form data, remote address, and file information, if any.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eResponse Saving\u003c/strong\u003e: The \u003ccode\u003esave_response\u003c/code\u003e function collects details from the HTTP response, including status code, status message, headers, and response data.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eRequest and Response Logging\u003c/strong\u003e: \u003ccode\u003ebefore_request\u003c/code\u003e logs the HTTP method and endpoint of each incoming request. \u003ccode\u003eafter_request\u003c/code\u003e adds CORS headers to the response, logs the response data, and then returns the response.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eRoot Endpoint Handling\u003c/strong\u003e: The \u003ccode\u003ehello_world\u003c/code\u003e function responds to HTTP GET requests at the root (\u003ccode\u003e/\u003c/code\u003e) endpoint. It generates a unique identifier for the request, saves the request data, creates a response containing the request data in JSON format, sets a cookie, and returns the response.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eServer Launch\u003c/strong\u003e: The server runs on all network interfaces (\u003ccode\u003e0.0.0.0\u003c/code\u003e) and listens on the port specified by the \"PORT\" environment variable, or 8080 if not set.\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"requirementstxt\"\u003e\u003ca href=\"https://github.com/xprilion/docker-python-dump-http-request-example/blob/main/requirements.txt\"\u003erequirements.txt\u003c/a\u003e\u003c/h3\u003e\u003cp\u003eA \u003ccode\u003erequirements.txt\u003c/code\u003e file in a Python project is used to specify the dependencies of the project along with their versions (optional).\u003c/p\u003e\u003cp\u003eIn this \u003ccode\u003erequirements.txt\u003c/code\u003e file, we load Flask and gunicorn, which are enough for us to build the project. In most real world projects there are far more dependencies and the \u003ccode\u003erequirements.txt\u003c/code\u003e file for such projects may span several dozen lines.\u003c/p\u003e\u003cp\u003eWhen setting up the project, you can use \u003ccode\u003epip install -r requirements.txt\u003c/code\u003e to install all of the dependencies. If version numbers are provided, pip will try to install the exact version numbers or else default to the latest available version.\u003c/p\u003e\u003ch2 id=\"code-usage\"\u003eCode Usage\u003c/h2\u003e\u003cp\u003eNow, a quick note on how you can quickly deploy this code to anywhere you want using docker:\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eRun the Docker container\u003c/strong\u003e: Run the Docker container from the image you just created. Replace \u003ccode\u003e$PORT\u003c/code\u003e with the port number you want to use.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003edocker run -p $PORT:8080 -e PORT=8080 my-python-app\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis command runs the Docker container, mapping the host's \u003ccode\u003e$PORT\u003c/code\u003e to the container's \u003ccode\u003e8080\u003c/code\u003e port, which the Flask application inside the Docker container is listening on.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eBuild the Docker image\u003c/strong\u003e: Run the following command in the terminal, in the directory containing your Dockerfile. This command builds a Docker image with the tag \u003ccode\u003emy-python-app\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003edocker build -t my-python-app .\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRemember, you need to have Docker installed on your machine to execute these commands.\u003c/p\u003e\u003cp\u003eIn production scenarios, you would push your Docker image to a Docker registry (like Docker Hub, Google Container Registry, or AWS Elastic Container Registry), then pull and run the Docker image from machines where you want your application to run. Also, orchestration tools like Kubernetes, Docker Swarm, or managed services like Google Cloud Run, AWS ECS/Fargate could be used to handle deployment, scaling, and management of Docker containers in a production setting.\u003c/p\u003e\u003cp\u003eWhen you hit the endpoint created by deploying this code, you'll get a response similar to the one below:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n    \"uuid\": \"f50cc7d0f26511eda4bb75c989e55f1e\",\n    \"endpoint\": \"hello_world\",\n    \"method\": \"GET\",\n    \"cookies\": {\n        \"cookie-name\": \"cookie-value\"\n    },\n    \"data\": \"b''\",\n    \"headers\": {\n        \"Host\": \"test-cloud-run-custom.xpri.dev\",\n        \"Cache-Control\": \"max-age=0\",\n        \"Sec-Ch-Ua\": \"\\\"Chromium\\\";v=\\\"112\\\", \\\"Google Chrome\\\";v=\\\"112\\\", \\\"Not:A-Brand\\\";v=\\\"99\\\"\",\n        \"Sec-Ch-Ua-Mobile\": \"?0\",\n        \"Sec-Ch-Ua-Platform\": \"\\\"macOS\\\"\",\n        \"Upgrade-Insecure-Requests\": \"1\",\n        \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36\",\n        \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\",\n        \"Sec-Ch-Ua-Arch\": \"\\\"arm\\\"\",\n        \"Sec-Ch-Ua-Platform-Version\": \"\\\"13.3.1\\\"\",\n        \"Sec-Ch-Ua-Model\": \"\\\"\\\"\",\n        \"Sec-Ch-Ua-Bitness\": \"\\\"64\\\"\",\n        \"Sec-Ch-Ua-Wow64\": \"?0\",\n        \"Sec-Ch-Ua-Full-Version-List\": \"\\\"Chromium\\\";v=\\\"112.0.5615.137\\\", \\\"Google Chrome\\\";v=\\\"112.0.5615.137\\\", \\\"Not:A-Brand\\\";v=\\\"99.0.0.0\\\"\",\n        \"Sec-Fetch-Site\": \"none\",\n        \"Sec-Fetch-Mode\": \"navigate\",\n        \"Sec-Fetch-User\": \"?1\",\n        \"Sec-Fetch-Dest\": \"document\",\n        \"Accept-Language\": \"en-US,en;q=0.9\",\n        \"X-Cloud-Trace-Context\": \"7361fa590088de543df325a9832ab85e/4131215564459013469\",\n        \"Traceparent\": \"00-7361fa590088de543df325a9832ab85e-395506aaf224f55d-00\",\n        \"X-Forwarded-For\": \"2401:4900:xxxx:xxxx:xxxx:5400:xxxx:xxxx\",\n        \"X-Forwarded-Proto\": \"https\",\n        \"Forwarded\": \"for=\\\"[2401:4900:xxxx:xxxx:xxxx:5400:xxxx:xxxx]\\\";proto=https\",\n        \"Accept-Encoding\": \"gzip, deflate, br\"\n    },\n    \"args\": {},\n    \"form\": {},\n    \"remote_addr\": \"169.xxx.xxx.xxx\",\n    \"files\": []\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis response is a JSON representation of the details of an HTTP GET request received by the server. Let's break down what each key-value pair means:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e\"uuid\": \"f50cc7d0f26511eda4bb75c989e55f1e\"\u003c/code\u003e: This is a unique identifier for this request.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"endpoint\": \"hello_world\"\u003c/code\u003e: The name of the endpoint that was hit. It corresponds to the function handling the request in the Flask application.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"method\": \"GET\"\u003c/code\u003e: The HTTP method used for this request.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"cookies\": {\"cookie-name\": \"cookie-value\"}\u003c/code\u003e: The cookies sent with this request. In this case, there is one cookie named \"cookie-name\" with a value of \"cookie-value\".\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"data\": \"b''\"\u003c/code\u003e: The data sent with this request. In this case, no data was sent.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"headers\"\u003c/code\u003e: This is a dictionary containing all the HTTP headers that were sent with the request. This includes information about the client, the accepted response types, and more.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"args\": {}\u003c/code\u003e and \u003ccode\u003e\"form\": {}\u003c/code\u003e: These would contain any query parameters or form data sent with the request. In this case, none were sent.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"remote_addr\": \"169.254.1.1\"\u003c/code\u003e: This is the IP address of the client that sent the request.\u003c/li\u003e\u003cli\u003e\u003ccode\u003e\"files\": []\u003c/code\u003e: This would contain any files sent with the request. In this case, none were sent.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe server logs all of these details for each request it receives. This can be useful for debugging, analytics, and other purposes.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"$L14\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-6\",\"children\":[[\"$\",\"$L15\",null,{\"href\":\"/posts\",\"className\":\"text-blue-600 hover:underline mb-4 block\",\"children\":\"← Back to all posts\"}],[\"$\",\"h1\",null,{\"className\":\"text-2xl md:text-3xl font-bold mb-2\",\"children\":\"Docker Python Dump HTTP Request Example\"}],[\"$\",\"p\",null,{\"className\":\"text-gray-600 dark:text-gray-200 text-sm \",\"children\":\"12 May, 2023\"}]]}],null,[\"$\",\"$L16\",null,{\"html\":\"$17\",\"slug\":\"docker-python-dump-http-request\",\"title\":\"Docker Python Dump HTTP Request Example\"}],[\"$\",\"$L18\",null,{\"id\":\"MathJax-script\",\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js\",\"async\":true,\"strategy\":\"afterInteractive\"}],[\"$\",\"$L18\",null,{\"id\":\"MathJax-config\",\"strategy\":\"beforeInteractive\",\"dangerouslySetInnerHTML\":{\"__html\":\"\\n          MathJax = {\\n            tex: {\\n              inlineMath: [['((', '))']],\\n              displayMath: [['[[', ']]']],\\n            },\\n            svg: {\\n              fontCache: 'global'\\n            }\\n          };\\n        \"}}]]}]\n"])</script><script>self.__next_f.push([1,"13:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Docker Python Dump HTTP Request Example\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"This blog is an explanation for the code present in the github.com/xprilion/docker-python-dump-http-request-example repo.\\n\\nThe main purpose of the repo is to create a simple HTTP server developed using Python's Flask framework, hosted in a Docker environment. The server is designed to log HTTP request and response data for debugging or informational purposes. The HTTP server receives requests, stores information about them, and then responds with a JSON representation of the request data.\\n\\n\\nCode\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/logo.jpg\"}]],\"error\":null,\"digest\":\"$undefined\"}\nd:{\"metadata\":\"$13:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>