<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.666 'Gentium Book Basic',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Gentium Book Basic',serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Gentium Book Basic',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Gentium Book Basic',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Gentium Book Basic',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Gentium Book Basic',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Gentium Book Basic',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:inherit;font-family:'Gentium Book Basic',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}ul{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:0.85rem;line-height:1.666rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:1rem;line-height:1.666rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}blockquote{margin-left:1.666rem;margin-right:1.666rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.666rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.666rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}li > ul{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.666rem / 2);}code{font-size:0.85rem;line-height:1.666rem;}kbd{font-size:0.85rem;line-height:1.666rem;}samp{font-size:0.85rem;line-height:1.666rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.11067rem;padding-right:1.11067rem;padding-top:0.833rem;padding-bottom:calc(0.833rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style data-href="/styles.3b0842aa61e5648f954b.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Gentium+Book+Basic&display=swap);@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.SignupForm{display:flex;flex-direction:column;background:#000;color:#fff;padding:2rem}.SignupForm h3{margin-top:0;margin-bottom:1rem}.SignupForm .Wrapper{display:flex;flex-direction:row;overflow:hidden}.SignupForm input{color:#2a2a2a;width:100%;border:none}.SignupForm button,.SignupForm input{padding:.75rem 1rem}.SignupForm button{display:inline-block;border:none;background-image:none;background-color:#323232;color:#fff;letter-spacing:1px;transition:all .1s linear}.SignupForm button:hover{cursor:pointer;background:#dfdfdf;color:#000}body{font-family:Gentium Book Basic,serif}#large-nav{display:block;float:right}#small-nav{display:none;float:right}#small-nav-root{height:32px;width:32px;background-image:url(https://xprilion.com/images/site/ellipses.png);background-size:70% 70%;background-position:50%;background-repeat:no-repeat;border-radius:100px;border:1px solid #cdcdcd;padding:1em;cursor:pointer}#small-nav-menu{position:absolute;width:90%;margin-top:.5em;right:1em;background:#fff;padding:5%;box-shadow:0 0 20px 0 rgba(0,0,0,.25098039215686274);z-index:999}.large-nav-link{box-shadow:none;text-decoration:none;color:inherit}@media screen and (max-width:600px){#large-nav{display:none}#small-nav{display:inline-block}}#comment-policy,#disqus_recommendations{display:none!important}blockquote{border-bottom:8px solid #bfbfbf;background:#dedede;padding:1.5rem;margin:0 0 1.5rem;font-size:x-large}pre code{white-space:pre-wrap!important;white-space:-moz-pre-wrap!important;white-space:-pre-wrap!important;white-space:-o-pre-wrap!important;word-wrap:break-word!important}code{font-size:.9em!important}.post-container{max-width:800px;margin-left:auto;margin-right:auto}.post-content p{text-align:justify}.post-content p img{display:block;margin-left:auto;margin-right:auto;min-width:50%;max-height:60vh}.bottomPlayer button{height:auto!important}.bottomPlayer #speechifyButton{height:60px!important}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=08e9ef17b39c6e872728b05b87da2264" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#009688"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=08e9ef17b39c6e872728b05b87da2264"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=08e9ef17b39c6e872728b05b87da2264"/><title data-react-helmet="true">A Generic MongoDB Wrapper API with Flask and PyMongo | xprilion&#x27;s blog</title><meta data-react-helmet="true" name="description" content="Hey there, hope you’re well! It’s been a while since I wrote something here, to my defence I wrote this tutorial about How to setup a secure, remote JupyterLab…"/><meta data-react-helmet="true" property="og:title" content="A Generic MongoDB Wrapper API with Flask and PyMongo"/><meta data-react-helmet="true" property="og:description" content="Hey there, hope you’re well! It’s been a while since I wrote something here, to my defence I wrote this tutorial about How to setup a secure, remote JupyterLab…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Anubhav Singh"/><meta data-react-helmet="true" name="twitter:title" content="A Generic MongoDB Wrapper API with Flask and PyMongo"/><meta data-react-helmet="true" name="twitter:description" content="Hey there, hope you’re well! It’s been a while since I wrote something here, to my defence I wrote this tutorial about How to setup a secure, remote JupyterLab…"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-58b18773c6b4ec30eb6b.js"/><link as="script" rel="preload" href="/framework-6c3ead24af170cdcb87c.js"/><link as="script" rel="preload" href="/app-84ed8804f47557d1261a.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/025f0747cc6cd2cbb478f3d6151a4d8fd9615235-856dd72dd6604cf726e2.js"/><link as="script" rel="preload" href="/498a4364276330d988ecd78eebdb57b0e68b2ceb-d1e692e19d406e9218aa.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-1926bd52708b7b6df850.js"/><link as="fetch" rel="preload" href="/page-data/generic-mongodb-wrapper-using-flask-pymongo/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1296475691.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:66.64rem;padding:2.499rem 1.2495rem"><header><h1 style="font-size:1.68179rem;line-height:2.499rem;margin-bottom:1.666rem;margin-top:0;display:inline-block"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">xprilion&#x27;s blog</a></h1><div id="large-nav"><a class="large-nav-link" href="/posts/">Posts</a> <!-- -->·<!-- --> <a class="large-nav-link" href="/talks/">Talks</a> <!-- -->·<!-- --> <a class="large-nav-link" href="/publications/">Publications</a></div><div id="small-nav"><div id="small-nav-root"> </div><div id="small-nav-menu" style="display:none"><a class="small-nav-link" href="/posts/">Posts</a> <!-- -->·<!-- --> <a class="small-nav-link" href="/talks/">Talks</a> <!-- -->·<!-- --> <a class="small-nav-link" href="/publications/">Publications</a></div></div></header><hr/><main><div class="post-container"><h2 style="font-weight:normal">A Generic MongoDB Wrapper API with Flask and PyMongo</h2><p style="font-size:0.87055rem;line-height:1.666rem;display:block;margin-bottom:1.666rem;margin-top:-1.666rem">September 14, 2020</p><div class="post-content"><p>Hey there, hope you’re well! It’s been a while since I wrote something here, to my defence I wrote this tutorial about <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-jupyterlab-environment-on-ubuntu-18-04">How to setup a secure, remote JupyterLab workstation</a> on <a href="https://digitalocean.com">DigitalOcean</a>. Have you not read it yet? Go ahead and explore it if you’re interested in the topic! Now, moving ahead.</p>
<p>This blog is going to be about creating a generic wrapper API for your MongoDB installation using Flask and PyMongo. If you’ve little idea about what these terms mean, here we go - </p>
<h2>1. PyMongo and MongoDB</h2>
<p>When you’re working with the cool <a href="https://mongodb.com">MongoDB</a> using Python, <a href="https://pymongo.readthedocs.io/en/stable/">PyMongo</a> is your go to tool. The distribution facilitates a full fledged support for interacting with MongoDB databases, local or remote and provides a dead simple way of working with it through your Python code.</p>
<h2>2. Flask</h2>
<p>A very popular library in Python for creating web sites, often preferred for lightweight tasks and more often for creating API servers quickly, <a href="https://flask.palletsprojects.com">Flask</a> provides a way to have a no-frills web server running in minutes.</p>
<h2>3. You</h2>
<p><img src="https://media1.tenor.com/images/07feba4572471b21fd4258b6af83c9c4/tenor.gif" alt="Who&#x27;s awesome?"></p>
<p>A super cool person reading this nice blog for whom I hope I can make the time spent here worth!</p>
<p>Now that we’re done with the introductions, let’s chalk out a plan that we shall follow in this tutorial. Imagine a situation where you have a MongoDB database with yourselves, and are wondering how to use it for some basic <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations from a remotely running application. Further, to make things interesting, you’re unsure what collections in the database your application shall need, or it may even need to create arbitrary collections at any moment. Fortunately, you hit upon the golden idea of creating some public APIs to your database server using Flask which allow just those operations with our without some authentication, as per your need. </p>
<p>While I’m going to leave the (tiny) headache of getting a MongoDB server to you, which you can easily get on many online providers, even for free at some places, I shall begin with the requirements of our API. </p>
<h2>The specification</h2>
<p>If you went through the specification of CRUD, you know that we need 4 REST APIs to begin with - </p>
<table>
<thead>
<tr>
<th align="left">Action</th>
<th align="center">Method</th>
<th align="center">MongoDB</th>
<th align="left">Parameters</th>
<th align="left">Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Create</td>
<td align="center">POST, PUT</td>
<td align="center">Insert</td>
<td align="left">None</td>
<td align="left">example.com/table</td>
</tr>
<tr>
<td align="left">Read All/One</td>
<td align="center">GET</td>
<td align="center">Find</td>
<td align="left">None/Resource ID</td>
<td align="left">example.com/table/[id]</td>
</tr>
<tr>
<td align="left">Update</td>
<td align="center">POST, PUT, PATCH</td>
<td align="center">Update</td>
<td align="left">Resource ID</td>
<td align="left">example.com/table/id</td>
</tr>
<tr>
<td align="left">Delete</td>
<td align="center">DELETE</td>
<td align="center">Delete</td>
<td align="left">Resource ID</td>
<td align="left">example.com/table/id</td>
</tr>
</tbody>
</table>
<h2>The preparation</h2>
<p>Now, we shall make sure we have some helper code ready for usage, usually to handle any errors on the API or simply to respond to an “are you alive” ping from anywhere remote.</p>
<p>First off, you’d need the right libraries installed. We shall be using the <code class="language-text">flask_pymongo</code> which is a wrapper around PyMongo with helpers for Flask provided. Besides, we will need the <code class="language-text">flask_cors</code> library to <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">allow fetching of resources from a different domain</a>. </p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">pip <span class="token function">install</span> flask, flask_pymongo, flask_cors</code></pre></div>
<p>Let’s import these libraries (and others which might be needed) into our script.</p>
<h3>Step 1: Importing libraries</h3>
<p>Create a file named <code class="language-text">app.py</code> in your working directory. Add the following lines to import all needed libraries - </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> request<span class="token punctuation">,</span> make_response
<span class="token keyword">from</span> flask_pymongo <span class="token keyword">import</span> PyMongo<span class="token punctuation">,</span> ObjectId
<span class="token keyword">from</span> flask_cors <span class="token keyword">import</span> CORS
<span class="token keyword">import</span> datetime
<span class="token keyword">from</span> bson<span class="token punctuation">.</span>json_util <span class="token keyword">import</span> dumps</code></pre></div>
<h3>Step 2: Setup constants, MongoDB connection and helper objects</h3>
<p>Now, let us define the stuff we shall be needing globally in the code.</p>
<p>First, let’s create an instance of our Flask app - </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
CORS<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
APP_ROOT <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>The <code class="language-text">CORS(app)</code> enables CORS for the API we shall run. Next, let’s define some HTTP status code responses we shall be making in the API.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># HTTP status code constants</span>
HTTP_SUCCESS_GET_OR_UPDATE          <span class="token operator">=</span>   <span class="token number">200</span>
HTTP_SUCCESS_CREATED                <span class="token operator">=</span>   <span class="token number">201</span>
HTTP_SUCCESS_DELETED                <span class="token operator">=</span>   <span class="token number">204</span>
HTTP_SERVER_ERROR                   <span class="token operator">=</span>   <span class="token number">500</span>
HTTP_NOT_FOUND                      <span class="token operator">=</span>   <span class="token number">404</span>
HTTP_BAD_REQUEST                    <span class="token operator">=</span>   <span class="token number">400</span></code></pre></div>
<p>Then, create a connection object for PyMongo -</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"MONGO_URI"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"mongodb://username:password@host:port/database?authSource=admin"</span>
mongo <span class="token operator">=</span> PyMongo<span class="token punctuation">(</span>app<span class="token punctuation">)</span></code></pre></div>
<p>Finally, we shall be creating a helper function that prepares the responses our API makes - </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> status_code<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> make_response<span class="token punctuation">(</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> status_code<span class="token punctuation">)</span></code></pre></div>
<p>This function will be responsible for preparing the data before finally giving it out through the API. Sometimes you might want global transforms on all output you’re producing, this is where they go.</p>
<h2>The real deal</h2>
<p>Now, we can setup the APIs to wrap around PyMongo. Let us start with the <code class="language-text">Create</code> API.</p>
<h3>Step 4: Create API</h3>
<p>In this step, I shall first put out the code for you to study, and then attempt explaining it.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/&lt;collection_name>'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">post_item</span><span class="token punctuation">(</span>collection_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
        Post one item in collection.
    """</span>
    collection <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>mongo<span class="token punctuation">.</span>db<span class="token punctuation">,</span> collection_name<span class="token punctuation">)</span>
    formdata <span class="token operator">=</span> request<span class="token punctuation">.</span>json
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        insert_id <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>collection<span class="token punctuation">.</span>insert_one<span class="token punctuation">(</span>formdata<span class="token punctuation">)</span><span class="token punctuation">.</span>inserted_id<span class="token punctuation">)</span>
        output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'new item created'</span><span class="token punctuation">,</span> <span class="token string">"_id"</span><span class="token punctuation">:</span> insert_id<span class="token punctuation">}</span>
        <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_SUCCESS_CREATED<span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'error'</span> <span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_BAD_REQUEST<span class="token punctuation">)</span></code></pre></div>
<p>In the code above, you see that we created a <code class="language-text">/&lt;collection_name&gt;</code> route. This means that we have kept the collection name generic, and whatever collection name is being passed to it, the API will attempt to insert data into it, or if it doesn’t exist yet in the database, it will first create the collection and then insert the item.</p>
<p>The API returns an <code class="language-text">id</code> which is useful for entry level operations like reading a single entry, updating it or deleting it.</p>
<h3>Step 5: Read API</h3>
<p>Next, we shall create an API to read the entries in the collection. There can be two instances of read - one in which you try to read exactly 1 entry and the other where you need all entries. Let us create these.</p>
<p>First, let’s create an API that returns all items in a collection - </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/&lt;collection_name>'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_all_items</span><span class="token punctuation">(</span>collection_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
        Documents in a collection.
    """</span>
    collection <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>mongo<span class="token punctuation">.</span>db<span class="token punctuation">,</span> collection_name<span class="token punctuation">)</span>
    output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> q <span class="token keyword">in</span> collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        output<span class="token punctuation">.</span>append<span class="token punctuation">(</span>q<span class="token punctuation">)</span>
    <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_SUCCESS_GET_OR_UPDATE<span class="token punctuation">)</span></code></pre></div>
<p>Now, any <code class="language-text">GET</code> request to any <code class="language-text">collection_name</code> will attempt to display all items in that collection. If it does not exist, the API will simply return a blank list, but will not attempt to create the collection.</p>
<p>Then, let’s create the route to get information about a single entry - </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/&lt;collection_name>/&lt;id>'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_one_item</span><span class="token punctuation">(</span>collection_name<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
        Get one item from a collection.
    """</span>
    collection <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>mongo<span class="token punctuation">.</span>db<span class="token punctuation">,</span> collection_name<span class="token punctuation">)</span>
    r <span class="token operator">=</span> collection<span class="token punctuation">.</span>find_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'_id'</span><span class="token punctuation">:</span> ObjectId<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> r<span class="token punctuation">:</span>
        <span class="token keyword">return</span> send<span class="token punctuation">(</span>r<span class="token punctuation">,</span> HTTP_SUCCESS_GET_OR_UPDATE<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> send<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'error'</span> <span class="token punctuation">:</span> <span class="token string">'item not found'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> HTTP_NOT_FOUND<span class="token punctuation">)</span></code></pre></div>
<p>Notice that the above route accepts both <code class="language-text">collection_name</code> and <code class="language-text">id</code>. This <code class="language-text">id</code> is the one which is returned in the Create API. </p>
<h3>Step 6: Update API</h3>
<p>Now, let’s create an API to allow updating one entry at a time. It would need to have both the <code class="language-text">collection_name</code> and <code class="language-text">id</code> parameters and would be accessible by a <code class="language-text">PUT</code> request.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/&lt;collection_name>/&lt;id>'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'PUT'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">update_item</span><span class="token punctuation">(</span>collection_name<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
        Update one item in collection.
    """</span>
    collection <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>mongo<span class="token punctuation">.</span>db<span class="token punctuation">,</span> collection_name<span class="token punctuation">)</span>
    r <span class="token operator">=</span> collection<span class="token punctuation">.</span>find_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'_id'</span><span class="token punctuation">:</span> ObjectId<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> r<span class="token punctuation">:</span>
        <span class="token keyword">for</span> key <span class="token keyword">in</span> request<span class="token punctuation">.</span>json<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            r<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>json<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            collection<span class="token punctuation">.</span>replace_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"_id"</span><span class="token punctuation">:</span> ObjectId<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
            output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'message'</span> <span class="token punctuation">:</span> <span class="token string">'item updated'</span><span class="token punctuation">}</span>
            <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_SUCCESS_GET_OR_UPDATE<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'error'</span> <span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_BAD_REQUEST<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'error'</span> <span class="token punctuation">:</span> <span class="token string">'item not found'</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_NOT_FOUND<span class="token punctuation">)</span></code></pre></div>
<p>Note that before we update the item, we check for its existence. You could skip this behaviour and could create an API which attempts to Create or Update, which is a popular requirement in many use cases.</p>
<h3>Step 7: Delete API</h3>
<p>A rather simpler API, the Delete API too needs both the <code class="language-text">collection_name</code> and <code class="language-text">id</code> and listens to the <code class="language-text">DELETE</code> request. </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/&lt;collection_name>/&lt;id>'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'DELETE'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">delete_item</span><span class="token punctuation">(</span>collection_name<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
        Delete one item from collection.
    """</span>
    collection <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>mongo<span class="token punctuation">.</span>db<span class="token punctuation">,</span> collection_name<span class="token punctuation">)</span>
    r <span class="token operator">=</span> collection<span class="token punctuation">.</span>find_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'_id'</span><span class="token punctuation">:</span> ObjectId<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> r<span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            collection<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">"_id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> send<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> HTTP_SUCCESS_DELETED<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'error'</span> <span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_BAD_REQUEST<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        output <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'error'</span> <span class="token punctuation">:</span> <span class="token string">'item not found'</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> send<span class="token punctuation">(</span>output<span class="token punctuation">,</span> HTTP_NOT_FOUND<span class="token punctuation">)</span></code></pre></div>
<h2>Conclusion</h2>
<p>With the above APIs, and any more you might wish to add to it, you can have a simple API wrapper around your MongoDB database which allows you to work with any collection at any moment. To get the full code head over to <a href="https://github.com/xprilion/generic-pymongo-flask">https://github.com/xprilion/generic-pymongo-flask</a>.</p>
<p>If you read through the code in the <code class="language-text">app.py</code> on the repository you’ll find a few more functions there, which can be a useful addition to your API.</p>
<p>Thanks for making time for going through this tutorial!</p></div><form action="https://tinyletter.com/xprilion" method="post" target="popupwindow" class="SignupForm"><h3>Subscribe to my newsletter</h3><i>I often write about my experiences, sometimes tech, sometimes life</i><br/><div class="Wrapper"><input type="text" aria-label="Email address" placeholder="Enter your email..." name="email" required="" id="tlemail"/><input type="hidden" value="1" name="embed"/><button type="submit">OK</button></div></form><div id="cusdis_thread" data-host="https://cusdis.com" data-page-id="100005" data-app-id="e9bc0bcb-d463-4f63-8604-34e78a1ec232" data-page-title="A Generic MongoDB Wrapper API with Flask and PyMongo" data-page-url="https://xprilion.com/generic-mongodb-wrapper-using-flask-pymongo/"></div></div></main><hr/><footer style="max-width:800px;margin-left:auto;margin-right:auto">© Anubhav Singh <!-- -->2022<div style="display:inline-block;float:right"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/sitemap.xml">Sitemap</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-86020000-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/generic-mongodb-wrapper-using-flask-pymongo/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a0c75589a40cac95b858.js"],"app":["/app-84ed8804f47557d1261a.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ad6431e4664bcf916d19.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0c8db51cd87d18c1443d.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c563e57f951cfadb6301.js"],"component---src-pages-posts-js":["/component---src-pages-posts-js-94238e3c3b4326e5fbe3.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-1926bd52708b7b6df850.js"]};/*]]>*/</script><script src="/polyfill-a0c75589a40cac95b858.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-1926bd52708b7b6df850.js" async=""></script><script src="/498a4364276330d988ecd78eebdb57b0e68b2ceb-d1e692e19d406e9218aa.js" async=""></script><script src="/025f0747cc6cd2cbb478f3d6151a4d8fd9615235-856dd72dd6604cf726e2.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-84ed8804f47557d1261a.js" async=""></script><script src="/framework-6c3ead24af170cdcb87c.js" async=""></script><script src="/webpack-runtime-58b18773c6b4ec30eb6b.js" async=""></script></body></html>