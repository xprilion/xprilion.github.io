<!DOCTYPE html><html lang="en" class="__variable_6ab973"><head><meta charSet="utf-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/22966f4f11fece13-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/3df4cf0b22f61940-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/a481f011d1f4a14b-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/feff4f1fc62fae3c-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/5d465971106e06ba.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/2dba37557e579c7e.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f3b8208e8dab82f4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-51e91e9f6e824314.js"/><script src="/_next/static/chunks/a82cbd8b-b3a1b1aa1798277d.js" async=""></script><script src="/_next/static/chunks/261-9869fd9e23c1aca9.js" async=""></script><script src="/_next/static/chunks/main-app-23cc923f66c03781.js" async=""></script><script src="/_next/static/chunks/app/layout-03b28790fff4d2e4.js" async=""></script><script src="/_next/static/chunks/943-eb5c9570e2ea5452.js" async=""></script><script src="/_next/static/chunks/981-982ff48b33ef9837.js" async=""></script><script src="/_next/static/chunks/224-ed8f8dcad199b1cb.js" async=""></script><script src="/_next/static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-NKJL65V2YL" as="script"/><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js" as="script"/><meta name="next-size-adjust" content=""/><link rel="icon" type="image/png" href="/apple-icon.png" sizes="96x96"/><link rel="icon" type="image/svg+xml" href="/icon0.svg"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><meta name="apple-mobile-web-app-title" content="xprilion&#x27;s blog"/><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#7b46f6"/><meta property="og:title" content="xprilion&#x27;s blog"/><meta property="og:description" content="Hey, I&#x27;m Anubhav Singh. I love building software, mixing stacks and making memes."/><meta property="og:image" content="/favicon.png"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@xprilion"/><meta name="twitter:creator" content="@xprilion"/><meta name="twitter:title" content="xprilion&#x27;s blog"/><meta name="twitter:description" content="Hey, I&#x27;m Anubhav Singh. I love building software, mixing stacks and making memes."/><meta name="twitter:image" content="/favicon.png"/><meta itemProp="name" content="xprilion&#x27;s blog"/><meta itemProp="description" content="Hey, I&#x27;m Anubhav Singh. I love building software, mixing stacks and making memes."/><meta itemProp="image" content="/favicon.png"/><title>Python Websockets SSL with Let&#x27;s Encrypt</title><meta name="description" content="This tutorial is an explanation of my gist Python Websockets SSL with Let&#x27;s Encrypt .

With the launch of HTML5 in 2008, a technology that immediately took off in popularity was WebSockets. According to W3C, the basic definition of a Websocket is - an interface that enables web applications to maintain bidirectional communications with server-side processes.

In this short tutorial, I&#x27;ll be showing you how you can host a WebSocket server with SSL enabled on it. This allows your socket server to "/><link rel="icon" href="/logo.jpg"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><script>((e,t,r,n,o,a,i,u)=>{let l=document.documentElement,s=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(l.classList.remove(...n),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)}),r=t,u&&s.includes(r)&&(l.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="max-w-6xl mx-auto px-1 md:px-4 font-gentium"><div class="flex flex-col min-h-screen px-2 md:px-4 bg-background text-foreground"><nav class="flex flex-row justify-between items-center py-4 border-b border-border relative"><a class="flex items-center justify-center" href="/"><h1 class="text-xl sm:text-2xl m-0 text-foreground font-normal leading-normal inline-block font-gentium-book truncate max-w-[200px] sm:max-w-none">xprilion&#x27;s blog</h1></a><div class="flex items-center gap-4"><div class="hidden lg:flex items-center font-gentium text-lg"><div><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/posts">Posts<!-- --> </a></div><div><span class="my-1 text-foreground"> · </span><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/talks">Talks<!-- --> </a></div><div><span class="my-1 text-foreground"> · </span><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/publications">Publications<!-- --> </a></div><div><span class="my-1 text-foreground"> · </span><a class="m-1 text-blue-600 dark:text-primary hover:text-blue-600 dark:hover:text-primary hover:underline" href="/codelabs">Codelabs<!-- --> </a></div></div><button id="mobile-menu-button" type="button" class="flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 lg:hidden text-3xl rounded-full border-2 border-foreground dark:invert dark:border-background" style="background-image:url(/ellipses.png);background-size:50%;background-position:50%;background-repeat:no-repeat" aria-label="Toggle navigation menu" aria-expanded="false"></button></div></nav><main class="flex-grow max-w-3xl mx-auto w-full py-8 px-1 md:px-4"><div class="mb-6"><a class="text-blue-600 hover:underline mb-4 block" href="/posts">← Back to all posts</a><h1 class="text-2xl md:text-3xl font-bold mb-2">Python Websockets SSL with Let&#x27;s Encrypt</h1><p class="text-gray-600 dark:text-gray-200 text-sm ">20 November, 2022</p></div><div class="prose prose-blue max-w-none"></div><script>(self.__next_s=self.__next_s||[]).push([0,{"children":"\n          MathJax = {\n            tex: {\n              inlineMath: [['((', '))']],\n              displayMath: [['[[', ']]']],\n            },\n            svg: {\n              fontCache: 'global'\n            }\n          };\n        ","id":"MathJax-config"}])</script></main><div class="w-full mx-auto py-6 max-w-6xl px-4 border-t border-border"><div class="flex flex-col sm:flex-row justify-between gap-2"><div class="text-center sm:text-left text-foreground">© Anubhav Singh <!-- -->2025</div><div class="text-center sm:text-right"><a class="text-foreground hover:text-blue-600 dark:hover:text-primary" href="/sitemap.xml">Sitemap</a><span class="mx-1 text-foreground">·</span><a class="text-foreground hover:text-blue-600 dark:hover:text-primary" href="/newsletter">Newsletter</a></div></div></div></div></div><!--$--><!--/$--><!--$--><!--/$--><script src="/_next/static/chunks/webpack-51e91e9f6e824314.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[6575,[\"177\",\"static/chunks/app/layout-03b28790fff4d2e4.js\"],\"ThemeProvider\"]\n3:I[4922,[],\"\"]\n4:I[3720,[],\"\"]\n5:I[3369,[\"177\",\"static/chunks/app/layout-03b28790fff4d2e4.js\"],\"GoogleAnalytics\"]\n7:I[2466,[],\"MetadataBoundary\"]\n9:I[2466,[],\"OutletBoundary\"]\nc:I[6114,[],\"AsyncMetadataOutlet\"]\ne:I[2466,[],\"ViewportBoundary\"]\n10:I[4797,[],\"\"]\n:HL[\"/_next/static/media/22966f4f11fece13-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/3df4cf0b22f61940-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/a481f011d1f4a14b-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/feff4f1fc62fae3c-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/5d465971106e06ba.css\",\"style\"]\n:HL[\"/_next/static/css/2dba37557e579c7e.css\",\"style\"]\n:HL[\"/_next/static/css/f3b8208e8dab82f4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"fx8c_MglUFYEsiAz-v7h6\",\"p\":\"\",\"c\":[\"\",\"python-websockets-ssl-with-lets-encrypt\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(blog)\",{\"children\":[[\"slug\",\"python-websockets-ssl-with-lets-encrypt\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5d465971106e06ba.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2dba37557e579c7e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_6ab973\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"href\":\"/apple-icon.png\",\"sizes\":\"96x96\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/svg+xml\",\"href\":\"/icon0.svg\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/apple-touch-icon.png\"}],[\"$\",\"meta\",null,{\"name\":\"apple-mobile-web-app-title\",\"content\":\"xprilion's blog\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/manifest.json\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#7b46f6\"}],[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",null,{\"itemProp\":\"name\",\"content\":\"xprilion's blog\"}],[\"$\",\"meta\",null,{\"itemProp\":\"description\",\"content\":\"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes.\"}],[\"$\",\"meta\",null,{\"itemProp\":\"image\",\"content\":\"/favicon.png\"}],[\"$\",\"meta\",null,{\"property\":\"og:title\",\"content\":\"xprilion's blog\"}],[\"$\",\"meta\",null,{\"property\":\"og:description\",\"content\":\"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes.\"}],[\"$\",\"meta\",null,{\"property\":\"og:image\",\"content\":\"/favicon.png\"}],[\"$\",\"meta\",null,{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:site\",\"content\":\"@xprilion\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:creator\",\"content\":\"@xprilion\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:title\",\"content\":\"xprilion's blog\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:description\",\"content\":\"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes.\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:image\",\"content\":\"/favicon.png\"}]]}],[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}],[\"$\",\"$L5\",null,{\"gaId\":\"G-NKJL65V2YL\"}]]}]]}],{\"children\":[\"(blog)\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:style\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:1:props:style\",\"children\":404}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:style\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style\",\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"python-websockets-ssl-with-lets-encrypt\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f3b8208e8dab82f4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L9\",null,{\"children\":[\"$La\",\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"Z8pxhUQt4Er4uxob-iocw\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[6114,[],\"AsyncMetadata\"]\n8:[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:null\n"])</script><script>self.__next_f.push([1,"14:I[1701,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"default\"]\n15:I[1999,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"\"]\n16:I[1106,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"default\"]\n18:I[4046,[\"943\",\"static/chunks/943-eb5c9570e2ea5452.js\",\"981\",\"static/chunks/981-982ff48b33ef9837.js\",\"224\",\"static/chunks/224-ed8f8dcad199b1cb.js\",\"356\",\"static/chunks/app/(blog)/%5Bslug%5D/page-f945c0378016101e.js\"],\"\"]\n17:T1c30,"])</script><script>self.__next_f.push([1,"\u003cp\u003eThis tutorial is an explanation of my gist \u003ca href=\"https://gist.github.com/xprilion/ceab48ec77a70be1d403e396170991e6\"\u003ePython Websockets SSL with Let's Encrypt\u003c/a\u003e .\u003c/p\u003e\u003cp\u003eWith the launch of HTML5 in 2008, a technology that immediately took off in popularity was WebSockets. According to W3C, the basic definition of a Websocket is - an interface that enables web applications to maintain bidirectional communications with server-side processes.\u003c/p\u003e\u003cp\u003eIn this short tutorial, I'll be showing you how you can host a WebSocket server with SSL enabled on it. This allows your socket server to run on an HTTPS address.\u003c/p\u003e\u003ch2 id=\"setup\"\u003eSetup\u003c/h2\u003e\u003cp\u003eWe'll be working with \u003ccode\u003easyncio\u003c/code\u003e library and for WebSocket server implementation will be using the \u003ccode\u003ewebsockets\u003c/code\u003e library.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003easyncio\u003c/code\u003e library comes pre-packaged with Python distributions since Python 3.4. To install \u003ccode\u003ewebsockets\u003c/code\u003e library, you can use the following command:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003epip install websockets\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNext, we'll be looking to how to generate the SSL certificate files.\u003c/p\u003e\u003ch2 id=\"generate-certificate-and-keyfile-using-lets-encrypt\"\u003eGenerate certificate and keyfile using Let's Encrypt\u003c/h2\u003e\u003cp\u003eBefore you can enable SSL on your WebSocket being run by a Python script, you'll have to generate certificate files for your domain.\u003c/p\u003e\u003cp\u003eThe basic gist of this step is to fetch Let's Encrypt signed certficiates for your domain and store them on your server where the Python WebSocket script is running.\u003c/p\u003e\u003cp\u003eHere's a great quick tutorial on \u003ca href=\"https://www.digitalocean.com/community/tutorials/how-to-use-certbot-standalone-mode-to-retrieve-let-s-encrypt-ssl-certificates-on-ubuntu-20-04\"\u003eHow To Use Certbot Standalone Mode to Retrieve Let's Encrypt SSL Certificates on Ubuntu 20.04\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"make-certificate-files-accessible\"\u003eMake certificate files accessible\u003c/h2\u003e\u003cp\u003eAfter generating the files correctly, you need to make them accessible to the current user who runs the Python WebSocket script.\u003c/p\u003e\u003cp\u003eIn the previous step, if \u003ccode\u003ecertbot\u003c/code\u003e stored your certificate files at \u003ccode\u003e/etc/letsencrypt/live/your_domain\u003c/code\u003e location, you should be able to see 4 files when you perform an \u003ccode\u003els\u003c/code\u003e on the folder -\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e~$ ls /etc/letsencrypt/live/your_domain\ncert.pem  chain.pem  fullchain.pem  privkey.pem  README\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo change the owner of the certificate files, use the following command:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e~$ sudo chown -R $(id -u):$(id -g) /etc/letsencrypt/live/your_domain\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNext, ensure that the right permissions are applied to the folder:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003e~$ sudo chmod -R 400 /etc/letsencrypt/live/your_domain\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe're now good to read these files from the Python WebSocket script.\u003c/p\u003e\u003ch2 id=\"create-server-script\"\u003eCreate server script\u003c/h2\u003e\u003cp\u003eWhile your WebSocket server script will differ from the most barebones implementation, here's one for you -\u003c/p\u003e\u003cp\u003eCreate a file named \u003ccode\u003esocket_\u003c/code\u003e\u003ca href=\"http://server.py\"\u003e\u003ccode\u003eserver.py\u003c/code\u003e\u003c/a\u003e. Then, make all the necessary imports.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003e#!/usr/bin/env python\n\n# WS server example that synchronizes state across clients\n\nimport asyncio\nimport json\nimport logging\nimport websockets\nimport ssl\n\nlogging.basicConfig()\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNext, let us configure the SSL for this script, as shown below -\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003essl_context = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)\n\n# Generate with Lets Encrypt, chown to current user and 400 permissions\nssl_cert = \"/etc/letsencrypt/live/your_domain/fullchain.pem\"\nssl_key = \"/etc/letsencrypt/live/your_domain/privkey.pem\"\n\nssl_context.load_cert_chain(ssl_cert, keyfile=ssl_key)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe above code configures the script to run a TLS server with the certificates available in the folder generated by \u003ccode\u003ecertbot\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eNext, we define the functions that shall be used to notify clients of the socket server and to get information from them.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003eSTATE = {\"value\": 0}\n\nUSERS = set()\n\n\ndef state_event():\n    return json.dumps({\"type\": \"state\", **STATE})\n\n\ndef users_event():\n    return json.dumps({\"type\": \"users\", \"count\": len(USERS)})\n\n\nasync def notify_state():\n    if USERS:  # asyncio.wait doesn't accept an empty list\n        message = state_event()\n        await asyncio.wait([user.send(message) for user in USERS])\n\n\nasync def notify_users():\n    if USERS:  # asyncio.wait doesn't accept an empty list\n        message = users_event()\n        await asyncio.wait([user.send(message) for user in USERS])\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter that, we need to add functions that register and unregister clients from the WebSocket.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003easync def register(websocket):\n    USERS.add(websocket)\n    await notify_users()\n\n\nasync def unregister(websocket):\n    USERS.remove(websocket)\n    await notify_users()\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis done, let us implement a function that gets state update requests from clients and performs it.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003easync def counter(websocket, path):\n    # register(websocket) sends user_event() to websocket\n    await register(websocket)\n    try:\n        await websocket.send(state_event())\n        async for message in websocket:\n            data = json.loads(message)\n            if data[\"action\"] == \"minus\":\n                STATE[\"value\"] -= 1\n                await notify_state()\n            elif data[\"action\"] == \"plus\":\n                STATE[\"value\"] += 1\n                await notify_state()\n            else:\n                logging.error(\"unsupported event: {}\", data)\n    finally:\n        await unregister(websocket)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFinally, we run the server.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-python\"\u003estart_server = websockets.serve(counter, \"0.0.0.0\", 6789, ssl=ssl_context)\n\nasyncio.get_event_loop().run_until_complete(start_server)\nasyncio.get_event_loop().run_forever()\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHow you expose the server to the internet, I shall leave that on your use case. However, you can explore this tutorial on \u003ca href=\"https://websockets.readthedocs.io/en/stable/howto/nginx.html\"\u003eWebsockets - Deploy behind nginx\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"implement-a-client-page\"\u003eImplement a client page\u003c/h2\u003e\u003cp\u003eTo test the above WebSocket script, you can spin up your own client script or feel free to use the \u003ca href=\"https://gist.github.com/xprilion/ceab48ec77a70be1d403e396170991e6#file-socket_client-html\"\u003esocket_client.html\u003c/a\u003e file I've provided.\u003c/p\u003e\u003cp\u003eMake sure to update the following line in the client file to point to your live server -\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003ewebsocket = new WebSocket(\"wss://localhost:6789/\");\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNote that we're using the \u003ccode\u003ewss://\u003c/code\u003e protocol here instead of \u003ccode\u003ews://\u003c/code\u003e protocol which is popularly found on other tutorials on the internet.\u003c/p\u003e\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\u003cp\u003eThis was my attempt at explaining the gist I put out more than an year back. Hope it helps you go through the process easier than how I had first written it.\u003c/p\u003e\u003cp\u003eMake sure to leave me feedback on how this blog went!\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"$L14\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-6\",\"children\":[[\"$\",\"$L15\",null,{\"href\":\"/posts\",\"className\":\"text-blue-600 hover:underline mb-4 block\",\"children\":\"← Back to all posts\"}],[\"$\",\"h1\",null,{\"className\":\"text-2xl md:text-3xl font-bold mb-2\",\"children\":\"Python Websockets SSL with Let's Encrypt\"}],[\"$\",\"p\",null,{\"className\":\"text-gray-600 dark:text-gray-200 text-sm \",\"children\":\"20 November, 2022\"}]]}],null,[\"$\",\"$L16\",null,{\"html\":\"$17\",\"slug\":\"python-websockets-ssl-with-lets-encrypt\",\"title\":\"Python Websockets SSL with Let's Encrypt\"}],[\"$\",\"$L18\",null,{\"id\":\"MathJax-script\",\"src\":\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js\",\"async\":true,\"strategy\":\"afterInteractive\"}],[\"$\",\"$L18\",null,{\"id\":\"MathJax-config\",\"strategy\":\"beforeInteractive\",\"dangerouslySetInnerHTML\":{\"__html\":\"\\n          MathJax = {\\n            tex: {\\n              inlineMath: [['((', '))']],\\n              displayMath: [['[[', ']]']],\\n            },\\n            svg: {\\n              fontCache: 'global'\\n            }\\n          };\\n        \"}}]]}]\n"])</script><script>self.__next_f.push([1,"13:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Python Websockets SSL with Let's Encrypt\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"This tutorial is an explanation of my gist Python Websockets SSL with Let's Encrypt .\\n\\nWith the launch of HTML5 in 2008, a technology that immediately took off in popularity was WebSockets. According to W3C, the basic definition of a Websocket is - an interface that enables web applications to maintain bidirectional communications with server-side processes.\\n\\nIn this short tutorial, I'll be showing you how you can host a WebSocket server with SSL enabled on it. This allows your socket server to \"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/logo.jpg\"}]],\"error\":null,\"digest\":\"$undefined\"}\nd:{\"metadata\":\"$13:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>