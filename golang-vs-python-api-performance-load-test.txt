1:"$Sreact.fragment"
2:I[6575,["177","static/chunks/app/layout-29f44809ba3fe938.js"],"ThemeProvider"]
3:I[4922,[],""]
4:I[3720,[],""]
6:I[2466,[],"MetadataBoundary"]
8:I[2466,[],"OutletBoundary"]
b:I[6114,[],"AsyncMetadataOutlet"]
d:I[2466,[],"ViewportBoundary"]
f:I[4797,[],""]
:HL["/_next/static/media/22966f4f11fece13-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/3df4cf0b22f61940-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/a481f011d1f4a14b-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/feff4f1fc62fae3c-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/2dba37557e579c7e.css","style"]
:HL["/_next/static/css/17c99d248f3289f7.css","style"]
:HL["/_next/static/css/f3b8208e8dab82f4.css","style"]
0:{"P":null,"b":"PTAgy1i70IAjsg35OEjA9","p":"","c":["","golang-vs-python-api-performance-load-test"],"i":false,"f":[[["",{"children":["(blog)",{"children":[["slug","golang-vs-python-api-performance-load-test","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/2dba37557e579c7e.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/17c99d248f3289f7.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"__variable_6ab973","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","link",null,{"rel":"icon","type":"image/png","href":"/apple-icon.png","sizes":"96x96"}],["$","link",null,{"rel":"icon","type":"image/svg+xml","href":"/icon0.svg"}],["$","link",null,{"rel":"shortcut icon","href":"/favicon.ico"}],["$","link",null,{"rel":"apple-touch-icon","sizes":"180x180","href":"/apple-touch-icon.png"}],["$","meta",null,{"name":"apple-mobile-web-app-title","content":"xprilion's blog"}],["$","link",null,{"rel":"manifest","href":"/manifest.json"}],["$","meta",null,{"name":"theme-color","content":"#7b46f6"}],["$","meta",null,{"charSet":"utf-8"}],["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta",null,{"itemProp":"name","content":"xprilion's blog"}],["$","meta",null,{"itemProp":"description","content":"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes."}],["$","meta",null,{"itemProp":"image","content":"/favicon.png"}],["$","meta",null,{"property":"og:title","content":"xprilion's blog"}],["$","meta",null,{"property":"og:description","content":"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes."}],["$","meta",null,{"property":"og:image","content":"/favicon.png"}],["$","meta",null,{"property":"og:type","content":"website"}],["$","meta",null,{"name":"twitter:card","content":"summary_large_image"}],["$","meta",null,{"name":"twitter:site","content":"@xprilion"}],["$","meta",null,{"name":"twitter:creator","content":"@xprilion"}],["$","meta",null,{"name":"twitter:title","content":"xprilion's blog"}],["$","meta",null,{"name":"twitter:description","content":"Hey, I'm Anubhav Singh. I love building software, mixing stacks and making memes."}],["$","meta",null,{"name":"twitter:image","content":"/favicon.png"}]]}],["$","body",null,{"className":"antialiased","children":["$","$L2",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}]]}],{"children":["(blog)",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:style","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:1:props:style","children":404}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:style","children":["$","h2",null,{"style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style","children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","golang-vs-python-api-performance-load-test","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",["$","$L6",null,{"children":"$L7"}],[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f3b8208e8dab82f4.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L8",null,{"children":["$L9","$La",["$","$Lb",null,{"promise":"$@c"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","Ed_G9awRFthpoXIoRJHNG",{"children":[["$","$Ld",null,{"children":"$Le"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],null]}],false]],"m":"$undefined","G":["$f","$undefined"],"s":false,"S":true}
10:"$Sreact.suspense"
11:I[6114,[],"AsyncMetadata"]
7:["$","$10",null,{"fallback":null,"children":["$","$L11",null,{"promise":"$@12"}]}]
a:null
e:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
9:null
13:I[1701,["943","static/chunks/943-eb5c9570e2ea5452.js","328","static/chunks/328-beff309a0d839380.js","224","static/chunks/224-ed8f8dcad199b1cb.js","356","static/chunks/app/(blog)/%5Bslug%5D/page-f23f643be99b5c74.js"],"default"]
14:I[1999,["943","static/chunks/943-eb5c9570e2ea5452.js","328","static/chunks/328-beff309a0d839380.js","224","static/chunks/224-ed8f8dcad199b1cb.js","356","static/chunks/app/(blog)/%5Bslug%5D/page-f23f643be99b5c74.js"],""]
15:I[1106,["943","static/chunks/943-eb5c9570e2ea5452.js","328","static/chunks/328-beff309a0d839380.js","224","static/chunks/224-ed8f8dcad199b1cb.js","356","static/chunks/app/(blog)/%5Bslug%5D/page-f23f643be99b5c74.js"],"default"]
17:I[4046,["943","static/chunks/943-eb5c9570e2ea5452.js","328","static/chunks/328-beff309a0d839380.js","224","static/chunks/224-ed8f8dcad199b1cb.js","356","static/chunks/app/(blog)/%5Bslug%5D/page-f23f643be99b5c74.js"],""]
16:T15a7,<p>In 2016, when I had started learning Python, I was increasingly convinced it would be the last programming language I would learn. After countless projects created with Python, a couple of technical books written, I am now learning Golang.</p><p>Why?</p><p>While working on <a href="https://callchimp.ai">Callchimp.ai</a>, the team came across a requirement of an efficient multithreading component as part of the system infrastructure. We initially tried to pull it off using Python but the code kept getting very ugly very soon, along with being slightly beyond our understanding of how it was working.</p><p>Hence, I decided to take a page from the book of world's multithreading king - Google.</p><p>But before I could commit to re-writing the functionality of our component using Golang, I needed concrete numbers to support the "uh..its faster..like zip-zap-zoom faster" comparison of Golang with Python.</p><p>Here's a short walkthrough of how I put "zip-zap-zoom faster" into a number.</p><h2 id="create-a-minimal-golang-server">Create a minimal Golang server</h2><p>First up, I created a barebones web server using Golang:</p><pre><code class="language-go">// server.go

package main

import (
	"fmt"
	"net/http"
)

func greetHandler(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "Hello, visitor! You've requested: %s\n", r.URL.Path)
}

func main() {
	// Register the greetHandler with the default mux (router)
	http.HandleFunc("/", greetHandler)

	// Start the web server on port 8080 and log any errors
	fmt.Println("Starting server on :8080")
	if err := http.ListenAndServe(":8080", nil); err != nil {
		fmt.Printf("Error starting server: %s\n", err)
	}
}
</code></pre><p>This I compiled to an executable and started its execution on port <code>8080</code> using the following commands:</p><pre><code class="language-bash">go build -o mygoserver server.go
./mygoserver
</code></pre><p>Next, I needed an equivalent Python server.</p><h2 id="create-a-minimal-python-server">Create a minimal Python server</h2><p>Since I was relying on Golang's native http library for the server, it made sense to do the same for Python. Hence, a minimal equivalent server was written:</p><pre><code class="language-python"># server.py

from http.server import BaseHTTPRequestHandler, HTTPServer

class SimpleHTTPRequestHandler(BaseHTTPRequestHandler):

    def do_GET(self):
        self.send_response(200)
        self.end_headers()
        self.wfile.write(f"Hello, visitor! You've requested: {self.path}\n".encode())

def run(server_class=HTTPServer, handler_class=SimpleHTTPRequestHandler, port=8081):
    server_address = ('', port)
    httpd = server_class(server_address, handler_class)
    print(f"Starting server on :{port}")
    httpd.serve_forever()

if __name__ == "__main__":
    run()
</code></pre><p>This, I ran on port <code>8081</code> using the following command:</p><pre><code class="language-bash">python server.py
</code></pre><p>With the servers up and running, I was ready to start testing them.</p><h2 id="install-a-load-test-tool">Install a load test tool</h2><p>To perform the load test, I needed an appropriate tool. I decided to use "rakyll/hey" for this - <a href="https://github.com/rakyll/hey">https://github.com/rakyll/hey</a>. This amazing tool is super lightweight and (interestingly?) written in Golang.</p><p>Then I ran the following commands in sequence to generate outputs which I compiled in the table that comes afterwards:</p><h4 id="time-taken-to-respond-to-10000-requests-100-concurrent-requests">Time taken to respond to 10,000 requests, 100 concurrent requests</h4><pre><code class="language-bash">time bash -c 'hey -n 10000 -c 100 http://localhost:8080/abc &gt;&gt; /dev/null'
time bash -c 'hey -n 10000 -c 100 http://localhost:8081/abc &gt;&gt; /dev/null'
</code></pre><h4 id="how-many-requests-can-it-respond-to-in-5-seconds-100-concurrent-requests">How many requests can it respond to in 5 seconds, 100 concurrent requests</h4><pre><code class="language-bash">hey -z=5s -c 100 http://localhost:8080/abc
hey -z=5s -c 100 http://localhost:8081/abc
</code></pre><h4 id="how-many-requests-can-it-respond-to-in-5-seconds-1-concurrent-request">How many requests can it respond to in 5 seconds, 1 concurrent request</h4><pre><code class="language-bash">hey -z=5s -c 1 http://localhost:8080/abc
hey -z=5s -c 1 http://localhost:8081/abc
</code></pre><p>With the tests done, it was time for the moment of truth.</p><h2 id="compiling-the-results">Compiling the results</h2><p>After running the tests, I put together my findings in this table -</p>
<!--kg-card-begin: html-->
<table>
<thead>
<tr>
<th>Language</th>
<th>Requests</th>
<th>Concurrency</th>
<th>Time Taken</th>
<th>Errors</th>
</tr>
</thead>
<tbody>
<tr>
<td>Python</td>
<td>10000</td>
<td>100</td>
<td>~35s</td>
<td>658</td>
</tr>
<tr>
<td>Go</td>
<td>10000</td>
<td>100</td>
<td>~0.149s</td>
<td>0</td>
</tr>
<tr>
<td>Python</td>
<td>7948</td>
<td>100</td>
<td>5s</td>
<td>30</td>
</tr>
<tr>
<td>Go</td>
<td>473766</td>
<td>100</td>
<td>5s</td>
<td>0</td>
</tr>
<tr>
<td>Python</td>
<td>8176</td>
<td>1</td>
<td>5</td>
<td>0</td>
</tr>
<tr>
<td>Go</td>
<td>137703</td>
<td>1</td>
<td>5</td>
<td>0</td>
</tr>
</tbody>
</table>
<!--kg-card-end: html-->
<p>Hence the verdict came out to be -</p><ol><li>Single concurrent request: Golang is 17x faster than Python.</li><li>100 concurrent requests: Golang is 60x faster than Python.</li></ol><h2 id="conclusion">Conclusion</h2><p>Friends, Romans, countrymen, I am so learning Golang.</p>5:["$","$L13",null,{"children":[["$","div",null,{"className":"mb-6","children":[["$","$L14",null,{"href":"/posts","className":"text-blue-600 hover:underline mb-4 block","children":"← Back to all posts"}],["$","h1",null,{"className":"text-2xl md:text-3xl font-bold mb-2","children":"Golang vs Python: API Performance Load Test"}],["$","p",null,{"className":"text-gray-600 dark:text-gray-200 text-sm ","children":"28 February, 2024"}]]}],null,["$","$L15",null,{"html":"$16","slug":"golang-vs-python-api-performance-load-test","title":"Golang vs Python: API Performance Load Test"}],["$","$L17",null,{"id":"MathJax-script","src":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js","async":true,"strategy":"afterInteractive"}],["$","$L17",null,{"id":"MathJax-config","strategy":"beforeInteractive","dangerouslySetInnerHTML":{"__html":"\n          MathJax = {\n            tex: {\n              inlineMath: [['((', '))']],\n              displayMath: [['[[', ']]']],\n            },\n            svg: {\n              fontCache: 'global'\n            }\n          };\n        "}}]]}]
12:{"metadata":[["$","title","0",{"children":"Golang vs Python: API Performance Load Test"}],["$","meta","1",{"name":"description","content":"In 2016, when I had started learning Python, I was increasingly convinced it would be the last programming language I would learn. After countless projects created with Python, a couple of technical books written, I am now learning Golang.\n\nWhy?\n\nWhile working on Callchimp.ai, the team came across a requirement of an efficient multithreading component as part of the system infrastructure. We initially tried to pull it off using Python but the code kept getting very ugly very soon, along with bei"}]],"error":null,"digest":"$undefined"}
c:{"metadata":"$12:metadata","error":null,"digest":"$undefined"}
